<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Routing for Marine Debris Collection</title>
  
  <!-- Password protection (same as your original) -->
  <script>
    const password = prompt("Please enter the password:");
    if (password !== "chris+ina") {
      document.write("<h1 style='color:red;text-align:center;margin-top:20%;'>‚ùå Access denied. Wrong password.</h1>");
      throw new Error("Access denied");
    }
  </script>

  <!-- MathJax for equations -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root{--blue:#2c5282;--blue2:#4a6483;--ink:#1a202c;--bg:#f9f9fb}
    body {margin:0;font-family:Segoe UI, system-ui, -apple-system, Roboto, Helvetica, Arial, sans-serif;background:var(--bg);color:var(--ink)}
    header, footer {background:var(--blue);color:white;text-align:center;padding:20px}
    nav {display:flex;flex-wrap:wrap;background:var(--blue);justify-content:center}
    nav button {flex:1 1 33%;min-width:120px;padding:14px;border:none;background:var(--blue);color:white;cursor:pointer}
    nav button:hover, nav button.active {background:var(--blue2)}
    section {display:none;max-width:1000px;margin:auto;padding:20px}
    section.active {display:block}
    h2 {color:var(--blue)}
    .equation {text-align:center;font-size:1.06rem;margin:18px 0}
    .video-container, .iframe-container {position:relative;width:100%;padding-bottom:56.25%;height:0;margin:20px 0}
    .video-container video, .iframe-container iframe {position:absolute;top:0;left:0;width:100%;height:100%;border:0}
    .highlight {background:#edf2f7;padding:10px;border-left:4px solid #4299e1;margin:16px 0}
    .slider-container {margin:24px 0;text-align:center}
    .slider-container input[type=range] {width:100%;max-width:360px}
    ul.inline li{margin:6px 0}
  </style>
</head>
<body>

<header>
  <h1>Dynamic Routing for Marine Debris Collection</h1>
  <p>Optimizing vessel paths in dynamic ocean environments with drifting plastic hotspots</p>
</header>

<nav>
  <button onclick="showTab('problem')" class="active">üìç Problem</button>
  <button onclick="showTab('math')">üìê Math & Optimization</button>
  <button onclick="showTab('logic')">üß† Logic</button>
  <button onclick="showTab('comparison')">üìä Comparison</button>
  <button onclick="showTab('video')">üé• Video</button>
  <button onclick="showTab('paper')">üìÑ Paper</button>
  <button onclick="showTab('comments')">üí¨ Comments</button>
</nav>

<section id="problem" class="active">
  <h2>üìç Problem Setting</h2>
  <p>Plastic hotspots drift with ocean currents. The goal is to maximize collected value within a given time horizon using a reactive, greedy heuristic. Each hotspot has a position, a value, and a drift trajectory.</p>
  <div class="highlight"><strong>How hotspots are created.</strong> Hotspots are <em>clustered debris areas</em>: we seed many simulated particles (floating plastic) across the surface and **cluster** them by spatial proximity to obtain compact regions of high density. A hotspot‚Äôs <em>initial position</em> is the cluster centroid; its <em>value</em> is proportional to cluster size (number of particles/mass). After collection by a vessel, the hotspot‚Äôs value is set to 0 and it is removed from the active set.</div>
  <img src="hotspot_example.png" alt="Hotspot example" style="max-width:100%"/>
</section>

<section id="math">
  <h2>üìê Math & Optimization Model</h2>

  <h3>Motion (discrete time)</h3>
  <div class="equation">\[ p_i(t+1) = p_i(t) + c\big(p_i(t),t\big)\,\Delta t \]</div>
  <div class="equation">\[ q_k(t+1) = q_k(t) + v_k\,u_k(t)\,\Delta t + c\big(q_k(t),t\big)\,\Delta t \]</div>
  <ul class="inline">
    <li>\(p_i(t)\): hotspot \(i\) position at time \(t\); current field \(c(\cdot,t)\) from reader.</li>
    <li>\(q_k(t)\): vessel \(k\) position; \(u_k(t)\) unit vector towards current target; \(v_k\) vessel speed.</li>
  </ul>

  <h3>Greedy score (your implementation)</h3>
  <div class="equation">\[ S_{i,k}(t) = \alpha\Big(1 - \tfrac{d_{i,k}(t)}{d_{\max}(t)}\Big) + (1-\alpha)\,\tfrac{v_i}{v_{\max}(t)}\,,\quad \alpha\in[0,1] \]</div>
  <p>Here \(d_{i,k}(t)=\lVert q_k(t)-p_i(t)\rVert\) and \(v_i\) is the hotspot‚Äôs value. Scores are normalized over the current candidate set.</p>

  <h3>Optimization model (time-expanded, high-level)</h3>
  <p>This formal model summarizes the routing objective and constraints your greedy policy approximates.</p>
  <div class="equation">\[ \max \sum_{t\in T} \sum_{k\in K} \sum_{i\in N_t} \pi_i\,(t)\, x_{i,k}(t) \]</div>
  <p><strong>Decision variables.</strong></p>
  <ul class="inline">
    <li>\(z_{i,k}(t)\in\{0,1\}\): vessel \(k\) <em>targets</em> hotspot \(i\) at time \(t\)</li>
    <li>\(x_{i,k}(t)\in\{0,1\}\): vessel \(k\) <em>collects</em> hotspot \(i\) at time \(t\)</li>
  </ul>
  <p><strong>Constraints.</strong></p>
  <ul>
    <li>(C1) Unique collection per hotspot: <span class="equation">\( \sum_{t\in T}\sum_{k\in K} x_{i,k}(t) \le 1 \quad \forall i \)</span></li>
    <li>(C2) One target per vessel per step: <span class="equation">\( \sum_{i\in N_t} z_{i,k}(t) \le 1 \quad \forall k, t \)</span></li>
    <li>(C3) Non-overlap pursuit: <span class="equation">\( \sum_{k\in K} z_{i,k}(t) \le 1 \quad \forall i\in N_t, t \)</span></li>
    <li>(C4) Kinematics consistency (pursue implies heading): <span class="equation">\( z_{i,k}(t)=1 \Rightarrow u_k(t) \propto p_i(t)-q_k(t) \)</span></li>
    <li>(C5) Collection rule: <span class="equation">\( x_{i,k}(t)=1 \Rightarrow \lVert q_k(t)-p_i(t)\rVert \le \varepsilon \)</span></li>
    <li>(C6) Start positions: <span class="equation">\( q_k(0)=q_k^{\text{start}} \)</span></li>
  </ul>
  <p class="highlight"><strong>Retargeting rule (practical tie-breaker).</strong> While tracking \(j\), switch to \(i\) if \(S_{i,k}(t) \ge S_{j,k}(t)+\delta\). Use a small hysteresis \(\delta\) or a minimal binding time to avoid flip-flops.</p>

  <h3>Data used</h3>
  <ul>
    <li><strong>Currents:</strong> surface current vectors from NetCDF reader at vessel/patch positions.</li>
    <li><strong>Hotspot values:</strong> proportional to initial cluster size (mass proxy).</li>
    <li><strong>Parameters:</strong> \(\alpha\in[0,1]\), \(\delta\in[0,0.2]\), capture radius \(\varepsilon\), step \(\Delta t\).</li>
  </ul>
</section>

<section id="logic">
  <h2>üß† Greedy Routing Logic</h2>
  <ol>
    <li>Compute score for all active hotspots</li>
    <li>Select the highest-scoring target (respect non-overlap)</li>
    <li>Move towards the target with drift (update \(q_k\))</li>
    <li>Collect when within \(\varepsilon\); deactivate hotspot</li>
    <li>Retarget if a better target emerges (hysteresis \(\delta\))</li>
  </ol>
  <div class="slider-container">
    <label for="alphaRange">Adjust Œ±: <span id="alphaValue">0.50</span></label><br>
    <input type="range" id="alphaRange" min="0" max="1" step="0.01" value="0.50" oninput="updateAlpha(this.value)">
  </div>
</section>

<section id="comparison">
  <h2>üìä Alpha Comparison</h2>
  <img src="alpha_comparison.png" alt="Alpha comparison" style="max-width:100%"/>
</section>

<section id="video">
  <h2>üé• Simulation Video</h2>
  <div class="video-container">
    <video controls>
      <source src="simulation.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
</section>

<section id="paper">
  <h2>üìÑ Full Paper</h2>
  <div class="iframe-container">
    <iframe src="paper.pdf"></iframe>
  </div>
</section>

<section id="comments">
  <h2>üí¨ Comments</h2>
  <textarea id="commentInput" placeholder="Leave a comment..." rows="4" style="width:100%;max-width:800px;"></textarea>
  <br><br>
  <button onclick="addComment()">Submit</button>
  <div id="commentList" style="margin-top:20px;"></div>
</section>

<footer>
  <p>Paulina Heine ¬∑ August 2025 ¬∑ GitHub Pages Presentation</p>
</footer>

<script>
  // Tabs
  function showTab(id){
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelector(`nav button[onclick*='${id}']`).classList.add('active');
  }

  // Œ± slider label
  function updateAlpha(val){ document.getElementById('alphaValue').textContent = (+val).toFixed(2); }

  // Comments (localStorage)
  function addComment(){
    const input = document.getElementById('commentInput');
    const comment = input.value.trim();
    if(!comment) return;
    const list = document.getElementById('commentList');
    const entry = document.createElement('div');
    entry.style.padding='10px';
    entry.style.marginBottom='10px';
    entry.style.background='#edf2f7';
    entry.style.borderLeft='4px solid #4299e1';
    entry.textContent = comment;
    list.appendChild(entry);
    const comments = JSON.parse(localStorage.getItem('comments')||'[]');
    comments.push(comment);
    localStorage.setItem('comments', JSON.stringify(comments));
    input.value = '';
  }
  window.onload = function(){
    const saved = JSON.parse(localStorage.getItem('comments')||'[]');
    const list = document.getElementById('commentList');
    saved.forEach(c=>{
      const entry = document.createElement('div');
      entry.style.padding='10px';
      entry.style.marginBottom='10px';
      entry.style.background='#edf2f7';
      entry.style.borderLeft='4px solid #4299e1';
      entry.textContent=c;
      list.appendChild(entry);
    });
  }
</script>

</body>
</html>
